<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Guitar Practice</title>
        <meta name="description" content="Tool for practicing finding notes on a guitar">
        <meta name="author" content="jcapka">

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/skeleton.css">

        <link rel="icon" type="image/png" href="images/favicon.png">
        <style>
          #note {
            font-size: 10.0rem;
          }
        </style>
       
        <script type="text/javascript">
        let notes = ['A','B','C','D','E','F','G','A♭','B♭','D♭','E♭','G♭','A♯','C♯','D♯','F♯','G♯'];
        let running = true;
        let secondsDelay = 3;
  
        function getNote(){
          let	notePos = Math.floor(Math.random() * notes.length);
          return notes[notePos];
        }
        
        async function streamNotes(){
          while(running){
        
            let noteDiv = document.getElementById('note').setHTML(getNote());
        
            const delay = ms => new Promise(resolve => setTimeout(resolve, ms));
            await delay(secondsDelay * 1000); /// waiting
          }
        }
        
        function start(){
          running=true;
          document.getElementById('speed').setHTML(secondsDelay);
          streamNotes();
        }

        function stop(){
          running = false;
        }

        function faster(){
          secondsDelay-=0.5;
          document.getElementById('speed').setHTML(secondsDelay);
        }

        function slower(){
          secondsDelay+=0.5;
          document.getElementById('speed').setHTML(secondsDelay);
        }
        
        window.onload = start;
        
        </script>
        
    </head>
    <body>
      <div class="container">
        <div class="row">
          <div class="twelve columns" style="margin-top: 25%">
            <h1 id="note">
            </h1>
            <button onclick="start()">Start</button>
            <button onclick="stop()">Stop</button>
            <div id="speedDiv">
              Speed: <span id="speed"></span> seconds
            </div>  
            <button onclick="faster()">Faster</button>
            <button onclick="slower()">Slower</button>
          </div>
        </div>
      </div>
      
    </body>
</html>